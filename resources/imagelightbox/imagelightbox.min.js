!function(){"use strict";var i,t,e,n=$("<div/>").attr("class","imagelightbox-loading").append($("<div/>")),o=$("<div/>",{class:"imagelightbox-arrow imagelightbox-arrow-left"}),a=$("<div/>",{class:"imagelightbox-arrow imagelightbox-arrow-right"}),l=o.add(a),r=$("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),c=$("<div/>",{class:"imagelightbox-close"}),d=$("<div/>",{class:"imagelightbox-overlay"}),s=$("<a/>",{href:"#",class:"imagelightbox-navitem"}),u=$("<div/>",{class:"imagelightbox-nav"}),g=$("<div/>",{class:"imagelightbox-wrapper"}),h=$("body"),f=function(){var i,t=(null!==(i=document.body)&&void 0!==i?i:document.documentElement).style;return""===t.transition?"":""===t.webkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":null},p=null!==f(),v=function(i,t,e){var n,o={},a=null!==(n=f())&&void 0!==n?n:"";o[a+"transform"]="translateX("+t+") translateY(-50%)",o[a+"transition"]=a+"transform "+e.toString()+"s ease-in",i.css(o)},m="ontouchstart"in window,b=window.navigator,x=b.pointerEnabled||b.msPointerEnabled,w=function(i){if(m)return!0;if(!x||void 0===i.pointerType)return!1;if(void 0!==i.MSPOINTER_TYPE_MOUSE){if(i.MSPOINTER_TYPE_MOUSE!==i.pointerType)return!0}else if("mouse"!==i.pointerType)return!0;return!1},S=document,y=S.fullscreenEnabled||null!==(e=null!==(t=null!==(i=S.webkitFullscreenEnabled)&&void 0!==i?i:S.mozFullScreenEnabled)&&void 0!==t?t:S.msFullscreenEnabled)&&void 0!==e&&e,E=void 0!==window.history&&void 0!==history.pushState;$.fn.imageLightbox=function(i){var t=0,e=$(),o=!1,a=0,f=$(),b=-1,S=$([]),I="",k=[],q=$.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,history:!1,fullscreen:!1,gutter:10,offsetY:0,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},i),C=function(){q.activity&&z(),q.arrows&&l.css("display","block")},L=function(i,t,e){var n=t+"="+e,o="?"+n;if(i){var a=new RegExp("([?&])"+t+"=[^&]*");o=null!==a.exec(i)?i.replace(a,"$1"+n):i+"&"+n}return o},T=function(){var i;if(E&&q.history){var t=null!==(i=S[b].dataset.ilb2Id)&&void 0!==i?i:b.toString(),e={imageLightboxIndex:t,imageLightboxSet:""},n=S[b].dataset.imagelightbox,o=L(document.location.search,"imageLightboxIndex",t);void 0!==n&&(e.imageLightboxSet=n,o=L(o,"imageLightboxSet",n)),window.history.pushState(e,"",document.location.pathname+o)}},O=function(i,t){var e=i;if(e){var n=new RegExp("\\?"+t+"=[^&]*"),o=new RegExp("&"+t+"=[^&]*");e=(e=e.replace(n,"?")).replace(o,"")}return e},P=function(i){var t=new RegExp("[?&]"+i+"(=([^&#]*)|&|#|$)").exec(document.location.search);if(void 0!==(null==t?void 0:t[2]))return decodeURIComponent(t[2].replace(/\+/g," "))},F=function(){if(E&&q.history){var i=P("imageLightboxIndex");if(void 0!==i){var t=S.filter('[data-ilb2-id="'+i+'"]');t.length>0?b=S.index(t):(b=parseInt(i),t=$(S[b]));var e=P("imageLightboxSet");0===t.length||void 0!==e&&e!==t[0].dataset.imagelightbox||j(t,!0)}}},M=function(){if(!o){if(--b<0){if(q.quitOnEnd)return void W();b=S.length-1}f=S.eq(b),T(),g.trigger("previous.ilb2",f),_(1)}},D=function(){if(!o){if(++b>=S.length){if(q.quitOnEnd)return void W();b=0}T(),f=S.eq(b),g.trigger("next.ilb2",f),_(-1)}},R=function(){g.append(n)},z=function(){$(".imagelightbox-loading").remove()},X=function(){g.append(d)},N=function(){c.appendTo(g).on("click.ilb7",(function(){return W(),!1}))},V=function(){r.css("opacity","0"),r.html("&nbsp;"),void 0!==$(f).data("ilb2-caption")?(r.css("opacity","1"),r.html($(f).data("ilb2-caption"))):void 0!==$(f).find("img").attr("alt")&&(r.css("opacity","1"),r.html($(f).find("img").attr("alt")))},U=function(){if(S.length){for(var i=0;i<S.length;i++)u.append(s.clone());var e=u.children("a");e.eq(S.index(f)).addClass("active"),g.on("previous.ilb2 next.ilb2",(function(){e.removeClass("active").eq(S.index(f)).addClass("active")})),g.append(u),u.on("click.ilb7 touchend.ilb7",(function(){return!1})).on("click.ilb7 touchend.ilb7","a",(function(){var i=$(this);if(S.eq(i.index()).attr("href")!==$(".imagelightbox").attr("src")){var e=S.eq(i.index());e.length&&(t=S.index(f),f=e,_(i.index()<t?-1:1))}i.addClass("active").siblings().removeClass("active")}))}},K=function(){g.append(l),l.on("click.ilb7 touchend.ilb7",(function(i){i.stopImmediatePropagation(),i.preventDefault(),$(this).hasClass("imagelightbox-arrow-left")?M():D()}))},Y=function(){if(e.length){var i=q.caption?r.outerHeight():0,t=$(window).width(),n=$(window).height()-i,o=Math.abs(1-q.gutter/100),a=e.data("ilb2VideoId"),l=!1;if($.each(k,(function(i,t){a===this.i&&(s(t.w,t.h),l=!0)})),!l){var c=e.get(0);if(void 0===c.videoWidth){var d=new Image;d.src=e.attr("src"),d.onload=function(){s(d.width,d.height)}}else s(c.videoWidth,c.videoHeight)}}function s(i,a){if(i>t||a>n){var l=i/a>t/n?i/t:a/n;i/=l,a/=l}var r=a*o,c=i*o,d=($(window).width()-c)/2;e.css({width:c.toString()+"px",height:r.toString()+"px",left:d.toString()+"px"})}},_=function(i){if(!o){if(e.length){var t={opacity:0};p?v(e,(100*i-a).toString()+"px",q.animationSpeed/1e3):t.left=(parseInt(e.css("left"))+100*i).toString()+"px",e.animate(t,q.animationSpeed,(function(){H()})),a=0}o=!0,q.activity&&R(),q.caption&&V(),setTimeout((function(){var t,n=0,l=0,r=0,c=f.attr("href"),d=f.data("ilb2Video"),s=$();function u(){var t={opacity:1};if(e.appendTo(g),Y(),e.css("opacity",0),p?(v(e,(-100*i).toString()+"px",0),setTimeout((function(){v(e,"0px",q.animationSpeed/1e3)}),50)):(r=parseInt(e.css("left")),t.left=r.toString()+"px",e.css("left",(r-100*i).toString()+"px")),e.animate(t,q.animationSpeed,(function(){o=!1,C()})),q.preloadNext){var n=S.eq(S.index(f)+1);n.length||(n=S.eq(0)),$("<img />").attr("src",n.attr("href"))}g.trigger("loaded.ilb2")}d?$.each(k,(function(i,e){e.i===f.data("ilb2VideoId")&&(t=e.l,s=e.e,void 0!==e.a&&(t?s.get(0).play():s.attr("autoplay",e.a)))})):s=$("<img id='"+q.id+"' />").attr("src",c),e=s.on("load.ilb7",u).on("error.ilb7",(function(){C()})).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",(function(i){w(i.originalEvent)&&!q.quitOnImgClick&&(p&&(r=parseInt(e.css("left"))),n=i.originalEvent.pageX||i.originalEvent.touches[0].pageX)})).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",(function(i){!x&&"pointermove"===i.type||!w(i.originalEvent)||q.quitOnImgClick||(i.preventDefault(),l=i.originalEvent.pageX||i.originalEvent.touches[0].pageX,a=n-l,p?v(e,(-a).toString()+"px",0):e.css("left",(r-a).toString()+"px"))})).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",(function(i){w(i.originalEvent)&&!q.quitOnImgClick&&(Math.abs(a)>50?a<0?M():D():p?v(e,"0px",q.animationSpeed/1e3):e.animate({left:r.toString()+"px"},q.animationSpeed/2))})),!0===t?u():!1===t&&(e=e.on("loadedmetadata.ilb7",u)),d||(e=e.on(x?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",(function(i){if(i.preventDefault(),q.quitOnImgClick)W();else if(!w(i.originalEvent)){var t=(i.pageX||i.originalEvent.pageX)-i.target.offsetLeft;i.target.width/3>t?M():D()}})))}),q.animationSpeed+100)}},H=function(){e.length&&(e.remove(),e=$())},j=function(i,t){o||(o=!1,f=i,b=S.index(f),t||T(),q.arrows&&K(),q.navigation&&U(),q.overlay&&X(),q.button&&N(),q.caption&&g.append(r),h.append(g).addClass("imagelightbox-open"),g.trigger("start.ilb2",i),_(0))},W=function(i){void 0===i&&(i=!1),b=-1,i||function(){if(E&&q.history){var i=O(document.location.search,"imageLightboxIndex");i=O(i,"imageLightboxSet"),window.history.pushState({},"",document.location.pathname+i)}}(),g.trigger("quit.ilb2"),h.removeClass("imagelightbox-open"),e.length&&e.animate({opacity:0},q.animationSpeed,(function(){H(),o=!1,g.remove().find("*").remove()}))},B=function(i){i.each((function(){S=i.add($(this))})),i.on("click.ilb7",{set:I},(function(t){t.preventDefault(),I=$(t.currentTarget).data("imagelightbox"),i.filter((function(){return $(this).data("imagelightbox")===I})).filter((function(){return i=$(this),"a"===$(i).prop("tagName").toLowerCase()&&(new RegExp(".("+q.allowedTypes+")$","i").test($(i).attr("href"))||$(i).data("ilb2Video"));var i})).each((function(){S=S.add($(this))})),S.length<1?W():j($(this),!1)}))},A=function(i){i.each((function(){var i=$(this).data("ilb2Video");if(i){var t=$(this).data("ilb2Id");t||(t="a"+(65536*(1+Math.random())|0).toString(16)),$(this).data("ilb2VideoId",t);var e={e:$("<video id='"+q.id+"' preload='metadata' data-ilb2-video-id='"+t+"'>"),i:t,l:!1,a:void 0,h:void 0,w:void 0};$.each(i,(function(i,t){switch(i){case"autoplay":e.a=t;break;case"height":e.h=t;break;case"sources":break;case"width":e.w=t;break;default:e.e=e.e.attr(i,t)}})),i.sources&&$.each(i.sources,(function(i,t){var n=$("<source>");$.each(t,(function(i,t){n=n.attr(i,t)})),e.e.append(n)})),e.e.on("loadedmetadata.ilb7",(function(){e.l=!0})),k.push(e)}}))};return $(window).on("resize.ilb7",Y),E&&q.history&&$(window).on("popstate",(function(i){var t=i.originalEvent.state;if(t){var e=t.imageLightboxIndex;if(void 0!==e){var n=S.filter('[data-ilb2-id="'+e+'"]');if(0!==n.length&&(void 0===t.imageLightboxSet||t.imageLightboxSet===n[0].dataset.imagelightbox))if(b<0)j(n,!0);else{var o=S.index(n),a=1;o>b&&(a=-1),f=n,b=o,_(a)}}else W(!0)}else W(!0)})),$(document).ready((function(){q.quitOnDocClick&&$(document).on(m?"touchend.ilb7":"click.ilb7",(function(i){e.length&&!$(i.target).is(e)&&(i.preventDefault(),W())})),q.fullscreen&&y&&$(document).on("keydown.ilb7",(function(i){var t,n,o,a;e.length&&([9,32,38,40].includes(i.which)&&(i.stopPropagation(),i.preventDefault()),[13].includes(i.which)&&(i.stopPropagation(),i.preventDefault(),t=window.document,n=document.getElementById(q.id).parentElement,o=n.requestFullscreen||n.mozRequestFullScreen||n.webkitRequestFullScreen||n.msRequestFullscreen,a=t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen,t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?a.call(t):o.call(n)))})),q.enableKeyboard&&$(document).on("keydown.ilb7",(function(i){e.length&&([27].includes(i.which)&&q.quitOnEscKey&&(i.stopPropagation(),i.preventDefault(),W()),[37].includes(i.which)&&(i.stopPropagation(),i.preventDefault(),M()),[39].includes(i.which)&&(i.stopPropagation(),i.preventDefault(),D()))}))})),$(document).off(".ilb7 .ilb2",q.selector),B($(this)),F(),A(S),this.addToImageLightbox=function(i){B(i),A(i)},this.openHistory=function(){F()},this.loadPreviousImage=function(){M()},this.loadNextImage=function(){D()},this.quitImageLightbox=function(){return W(),this},this.startImageLightbox=function(i){i?i.trigger("click.ilb7"):$(this).trigger("click.ilb7")},this}}();
//# sourceMappingURL=imagelightbox.min.js.map